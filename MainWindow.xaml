<Window x:Class="NexusAI.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="Nexus AI" 
        Height="900" Width="1600"
        WindowStartupLocation="CenterScreen"
        Background="#0F0F12"
        WindowStyle="None"
        ResizeMode="CanResizeWithGrip"
        AllowsTransparency="False"
        UseLayoutRounding="True"
        SnapsToDevicePixels="True"
        TextOptions.TextFormattingMode="Ideal"
        TextOptions.TextRenderingMode="ClearType">

    <Window.Resources>
        <Storyboard x:Key="FadeInAnimation">
            <DoubleAnimation Storyboard.TargetProperty="Opacity"
                             From="0" To="1" Duration="0:0:0.3">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>
    </Window.Resources>

    <Border CornerRadius="16" BorderBrush="{StaticResource GlassBorderBrush}" BorderThickness="1">
        <Grid>
            <Border CornerRadius="16" Background="{StaticResource DeepDarkBackgroundBrush}" />
            
            <Grid TextElement.Foreground="White">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <Border Grid.Row="0" 
                        Style="{StaticResource SolidPanel}" 
                        Height="70"
                        CornerRadius="16,16,0,0">
                    <Grid Margin="24,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                            <Border Width="44" Height="44" 
                                    CornerRadius="12"
                                    Background="{StaticResource AccentGradientBrush}">
                                <Border.Effect>
                                    <DropShadowEffect Color="{StaticResource AccentPurple}" 
                                                      BlurRadius="20" 
                                                      ShadowDepth="0" 
                                                      Opacity="0.7"/>
                                </Border.Effect>
                                <Viewbox Width="24" Height="24" HorizontalAlignment="Center" VerticalAlignment="Center">
                                    <Canvas Width="24" Height="24">
                                        <Canvas.RenderTransform>
                                            <RotateTransform Angle="45" CenterX="12" CenterY="12"/>
                                        </Canvas.RenderTransform>
                                        <Ellipse Canvas.Left="10" Canvas.Top="10" Width="4" Height="4" Fill="White"/>
                                        <Ellipse Canvas.Left="2" Canvas.Top="2" Width="3" Height="3" Fill="White" Opacity="0.8"/>
                                        <Ellipse Canvas.Left="19" Canvas.Top="2" Width="3" Height="3" Fill="White" Opacity="0.8"/>
                                        <Ellipse Canvas.Left="2" Canvas.Top="19" Width="3" Height="3" Fill="White" Opacity="0.8"/>
                                        <Ellipse Canvas.Left="19" Canvas.Top="19" Width="3" Height="3" Fill="White" Opacity="0.8"/>
                                        <Line X1="12" Y1="12" X2="3.5" Y2="3.5" Stroke="White" StrokeThickness="1.5" Opacity="0.6"/>
                                        <Line X1="12" Y1="12" X2="20.5" Y2="3.5" Stroke="White" StrokeThickness="1.5" Opacity="0.6"/>
                                        <Line X1="12" Y1="12" X2="3.5" Y2="20.5" Stroke="White" StrokeThickness="1.5" Opacity="0.6"/>
                                        <Line X1="12" Y1="12" X2="20.5" Y2="20.5" Stroke="White" StrokeThickness="1.5" Opacity="0.6"/>
                                    </Canvas>
                                </Viewbox>
                            </Border>
                            
                            <TextBlock Text="NEXUS" Margin="16,0,0,0" VerticalAlignment="Center" Foreground="White" FontSize="28" FontWeight="Black" FontFamily="{StaticResource PrimaryFont}">
                                <TextBlock.Effect>
                                    <DropShadowEffect Color="{StaticResource AccentPurple}" BlurRadius="12" ShadowDepth="0" Opacity="0.4"/>
                                </TextBlock.Effect>
                            </TextBlock>
                        </StackPanel>

                        <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center" Margin="0,0,8,0">
                            <Border Background="#1A1A22" BorderBrush="#7C3AED" BorderThickness="1" CornerRadius="8" Padding="12,8" Margin="0,0,12,0">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="ðŸ”‘ API Key" Foreground="White" FontWeight="SemiBold" FontSize="13" VerticalAlignment="Center" Margin="0,0,10,0"/>
                                    <PasswordBox x:Name="ApiKeyBox" 
                                                 Width="240" Height="28"
                                                 Background="Transparent"
                                                 Foreground="White"
                                                 BorderThickness="0"
                                                 Padding="0"
                                                 FontSize="13"
                                                 PasswordChanged="ApiKeyBox_PasswordChanged"
                                                 ToolTip="Ð’ÑÑ‚Ð°Ð²ÑŒÑ‚Ðµ Gemini API key (aistudio.google.com)"
                                                 VerticalAlignment="Center"/>
                                </StackPanel>
                            </Border>
                            
                            <TextBlock Text="{Binding StatusMessage}" 
                                       Foreground="White"
                                       VerticalAlignment="Center"
                                       Margin="0,0,12,0"/>
                            <Border Background="#252530" CornerRadius="8" BorderBrush="#555555" BorderThickness="1" Padding="0" Margin="0">
                                <StackPanel Orientation="Horizontal">
                                    <Button Content="âˆ’" Width="36" Height="36" Click="MinimizeWindow" Margin="2" Foreground="White" Background="Transparent" BorderThickness="0" FontSize="16" ToolTip="Ð¡Ð²ÐµÑ€Ð½ÑƒÑ‚ÑŒ"/>
                                    <Button Content="â–¡" Width="36" Height="36" Click="MaximizeWindow" Margin="2" Foreground="White" Background="Transparent" BorderThickness="0" FontSize="14" ToolTip="Ð Ð°Ð·Ð²ÐµÑ€Ð½ÑƒÑ‚ÑŒ"/>
                                    <Button Content="âœ•" Width="36" Height="36" Click="CloseWindow" Margin="2" Foreground="#FF6B6B" Background="Transparent" BorderThickness="0" FontSize="14" ToolTip="Ð—Ð°ÐºÑ€Ñ‹Ñ‚ÑŒ"/>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </Grid>
                </Border>

                <Grid Grid.Row="1" Margin="0,8,0,8">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="420" MinWidth="360" MaxWidth="620"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <Grid Grid.Column="0">
                        <Border Style="{StaticResource SolidPanel}"
                                Margin="16,0,8,16"
                                AllowDrop="True"
                                Drop="Sidebar_Drop"
                                DragEnter="Sidebar_DragEnter"
                                DragLeave="Sidebar_DragLeave"
                                x:Name="SidebarBorder">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <StackPanel Grid.Row="0" Margin="20,20,20,16">
                                    <TextBlock Text="ðŸ“š Sources" FontSize="20" FontWeight="Bold" Foreground="White"/>
                                    <TextBlock Text="Drag &amp; drop PDF or MD files here" Foreground="#A0A0A8" Margin="0,4,0,0"/>
                                </StackPanel>

                                <Grid Grid.Row="1">
                                    <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Visibility="{Binding Sources.Count, Converter={StaticResource CountToVisibilityConverter}, ConverterParameter=Inverted}">
                                        <TextBlock Text="â˜ï¸" FontSize="64" HorizontalAlignment="Center" Foreground="White" Opacity="0.3"/>
                                        <TextBlock Text="Drop your knowledge here" Foreground="White" Opacity="0.5" FontSize="16" HorizontalAlignment="Center" Margin="0,16,0,8"/>
                                    </StackPanel>
                                    
                                    <ScrollViewer VerticalScrollBarVisibility="Auto" Margin="12,0" Visibility="{Binding Sources.Count, Converter={StaticResource CountToVisibilityConverter}}">
                                        <ItemsControl ItemsSource="{Binding Sources}">
                                            <ItemsControl.ItemTemplate>
                                                <DataTemplate>
                                                    <Border Style="{StaticResource SourceCard}" Margin="0,0,0,8">
                                                        <Grid>
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="Auto"/>
                                                                <ColumnDefinition Width="Auto"/>
                                                                <ColumnDefinition Width="*"/>
                                                                <ColumnDefinition Width="Auto"/>
                                                            </Grid.ColumnDefinitions>
                                                            <Ellipse Grid.Column="0" Width="8" Height="8" Fill="#7C3AED" Margin="0,0,12,0" VerticalAlignment="Center" Visibility="{Binding IsIncluded, Converter={StaticResource BoolToVisibilityConverter}}"/>
                                                            <CheckBox Grid.Column="1" IsChecked="{Binding IsIncluded}" VerticalAlignment="Center" Margin="0,0,12,0"/>
                                                            <TextBlock Grid.Column="2" Text="{Binding Name}" Foreground="White" VerticalAlignment="Center" TextTrimming="CharacterEllipsis"/>
                                                            <Button Grid.Column="3" Content="âœ•" Style="{StaticResource GhostButton}" Command="{Binding DataContext.RemoveSourceCommand, RelativeSource={RelativeSource AncestorType=Window}}" CommandParameter="{Binding}" Foreground="White" Width="32" Height="32" Padding="0" ToolTip="Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ð¸ÑÑ‚Ð¾Ñ‡Ð½Ð¸Ðº"/>
                                                        </Grid>
                                                    </Border>
                                                </DataTemplate>
                                            </ItemsControl.ItemTemplate>
                                        </ItemsControl>
                                    </ScrollViewer>
                                </Grid>

                                <StackPanel Grid.Row="2" Margin="20,16,20,20">
                                    <!-- Obsidian Vault -->
                                    <Border Background="#1A1A22" BorderBrush="#7C3AED" BorderThickness="1" CornerRadius="8" Padding="16" Margin="0,0,0,12">
                                        <StackPanel>
                                            <TextBlock Text="Obsidian" Foreground="White" FontWeight="SemiBold" FontSize="13" Margin="0,0,0,8"/>
                                            <TextBlock Text="ÐŸÑƒÑ‚ÑŒ Ðº Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ñƒ (Ð¿Ð°Ð¿ÐºÐ° Ñ .md):" Foreground="#A0A0A8" FontSize="11" Margin="0,0,0,4" TextWrapping="Wrap"/>
                                            <Grid Margin="0,0,0,6">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>
                                                <TextBox Text="{Binding ObsidianVaultPath, UpdateSourceTrigger=PropertyChanged}" 
                                                         Background="#252530" Foreground="White" BorderThickness="0" Padding="8,6" 
                                                         FontSize="12" VerticalContentAlignment="Center"
                                                         Margin="0,0,8,0" MinWidth="120"/>
                                                <Button Grid.Column="1" Content="ÐžÐ±Ð·Ð¾Ñ€..." Style="{StaticResource GhostButton}" 
                                                        Command="{Binding BrowseVaultPathCommand}" MinWidth="72" Padding="10,6" Foreground="White"/>
                                            </Grid>
                                            <TextBlock Text="ÐŸÐ¾Ð´Ð¿Ð°Ð¿ÐºÐ° (Ð½ÐµÐ¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾):" Foreground="#A0A0A8" FontSize="11" Margin="0,0,0,4"/>
                                            <TextBox Text="{Binding ObsidianSubfolder, UpdateSourceTrigger=PropertyChanged}" 
                                                     Background="#252530" Foreground="White" BorderThickness="0" Padding="8,6" 
                                                     FontSize="12" VerticalContentAlignment="Center" Margin="0,0,0,8"/>
                                            <Button Style="{StaticResource GhostButton}" Command="{Binding LoadObsidianVaultCommand}" 
                                                    Height="36" MinWidth="140" Padding="12,0" Foreground="White" 
                                                    ToolTip="Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ Ð²ÑÐµ .md Ð·Ð°Ð¼ÐµÑ‚ÐºÐ¸ Ð¸Ð· Ð²Ñ‹Ð±Ñ€Ð°Ð½Ð½Ð¾Ð¹ Ð¿Ð°Ð¿ÐºÐ¸" Content="Sync Vault"/>
                                        </StackPanel>
                                    </Border>
                                    <Button Style="{StaticResource PremiumButton}" Command="{Binding AddPdfCommand}" Margin="0,0,0,8" Height="45">
                                        <TextBlock Text="ðŸ“„ Add PDF" Foreground="White" FontWeight="Bold"/>
                                    </Button>
                                </StackPanel>
                            </Grid>
                        </Border>
                        <Border x:Name="DragDropOverlay" Style="{StaticResource DragDropOverlay}" Visibility="Collapsed" Margin="16,0,8,16" IsHitTestVisible="False"/>
                    </Grid>

                    <GridSplitter Grid.Column="1" Width="2" Background="{StaticResource GlassBorderBrush}" HorizontalAlignment="Center" VerticalAlignment="Stretch"/>

                    <Border Grid.Column="2" Style="{StaticResource SolidPanel}" Margin="8,0,16,16">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>

                            <Border Grid.Row="0" Background="{StaticResource SecondaryPanelBrush}" CornerRadius="12" Margin="20,20,20,0" Padding="4">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Button Grid.Column="0" Content="ðŸ’¬ Chat" Style="{StaticResource PremiumButton}" Click="ShowChatTab" x:Name="ChatTabButton" Padding="16,10"/>
                                    <Button Grid.Column="1" Content="ðŸŽ¨ Artifacts" Style="{StaticResource GhostButton}" Click="ShowArtifactsTab" x:Name="ArtifactsTabButton" Foreground="White"/>
                                </Grid>
                            </Border>

                            <Grid Grid.Row="1" Margin="20">
                                <Grid x:Name="ChatTab" Visibility="Visible">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="*"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>

                                    <ScrollViewer Grid.Row="0" VerticalScrollBarVisibility="Auto">
                                        <StackPanel>
                                            <Border Background="#1A1A24" CornerRadius="12" Padding="20" Margin="0,0,0,20" Visibility="{Binding ChatMessages.Count, Converter={StaticResource CountToVisibilityConverter}, ConverterParameter=Inverted}">
                                                <StackPanel MaxWidth="700">
                                                    <TextBlock Text="ðŸ‘‹ Welcome to Nexus AI" FontSize="20" FontWeight="Bold" Foreground="White" Margin="0,0,0,8"/>
                                                    <TextBlock Text="I'm your AI research assistant. Load documents to start." Foreground="#A0A0A8" TextWrapping="Wrap"/>
                                                </StackPanel>
                                            </Border>
                                            <ItemsControl ItemsSource="{Binding ChatMessages}">
                                                <ItemsControl.ItemTemplate>
                                                    <DataTemplate>
                                                        <Border Background="#252530" CornerRadius="12" Padding="15" Margin="0,0,0,10" HorizontalAlignment="{Binding IsUser, Converter={StaticResource ChatAlignmentConverter}}" MaxWidth="800">
                                                            <StackPanel>
                                                                <TextBlock Text="{Binding Content}" Foreground="White" TextWrapping="Wrap"/>
                                                                <TextBlock Text="{Binding Citations}" Foreground="#7C3AED" FontSize="12" Margin="0,8,0,0" TextWrapping="Wrap" Visibility="{Binding Citations, Converter={StaticResource NullToVisibilityConverter}}"/>
                                                            </StackPanel>
                                                        </Border>
                                                    </DataTemplate>
                                                </ItemsControl.ItemTemplate>
                                            </ItemsControl>
                                            <StackPanel HorizontalAlignment="Center" Visibility="{Binding IsThinking, Converter={StaticResource BoolToVisibilityConverter}}" Margin="20">
                                                <Ellipse Width="15" Height="15" Fill="{StaticResource AccentGradientBrush}">
                                                    <Ellipse.Effect><DropShadowEffect BlurRadius="10" Color="{StaticResource AccentPurple}"/></Ellipse.Effect>
                                                </Ellipse>
                                                <TextBlock Text="Thinking..." Foreground="White" Margin="0,10,0,0" HorizontalAlignment="Center"/>
                                            </StackPanel>
                                        </StackPanel>
                                    </ScrollViewer>

                                    <StackPanel Grid.Row="1" Margin="0,12,0,0">
                                        <Button Style="{StaticResource GhostButton}" Command="{Binding ExportToObsidianCommand}" 
                                                MinHeight="44" Height="44" MinWidth="280" Foreground="White" Margin="0,0,0,8" HorizontalAlignment="Left"
                                                Padding="14,10" VerticalContentAlignment="Center"
                                                Content="ðŸ“¤ Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ Ð´Ð¸Ð°Ð»Ð¾Ð³ Ð² Obsidian" ToolTip="Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚ Ð²ÑÐµÐ³Ð¾ Ñ‡Ð°Ñ‚Ð° (Ð²Ð¾Ð¿Ñ€Ð¾ÑÑ‹ Ð¸ Ð¾Ñ‚Ð²ÐµÑ‚Ñ‹ Ð¿Ð¾ PDF) Ð² Ð¿Ð°Ð¿ÐºÑƒ AI_Notebook Ð²Ð°ÑˆÐµÐ³Ð¾ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ð°"/>
                                        <Border Background="#1A1A22" BorderBrush="#7C3AED" BorderThickness="1" CornerRadius="12" Padding="16">
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>
                                                <Border Grid.Column="0" Background="#252530" CornerRadius="8" Padding="12,10" Margin="0,0,12,0">
                                                    <TextBox Text="{Binding UserQuestion, UpdateSourceTrigger=PropertyChanged}" 
                                                             Background="Transparent" Foreground="White" BorderThickness="0" 
                                                             FontSize="15" VerticalContentAlignment="Center" MinHeight="36" 
                                                             TextWrapping="Wrap" AcceptsReturn="True"
                                                             CaretBrush="White"
                                                             Padding="0"/>
                                                </Border>
                                                <Button Grid.Column="1" Content="âž¤ ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒ" Style="{StaticResource PremiumButton}" Height="44" MinWidth="120" Command="{Binding AskQuestionCommand}"/>
                                            </Grid>
                                        </Border>
                                    </StackPanel>
                                </Grid>

                                <Grid x:Name="ArtifactsTab" Visibility="Collapsed">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>
                                    <Border Grid.Row="0" Background="#1A1A22" CornerRadius="8" Padding="12" Margin="0,0,0,12">
                                        <StackPanel>
                                            <TextBlock Text="Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð°Ñ€Ñ‚ÐµÑ„Ð°ÐºÑ‚ Ð¸Ð· Ð¸ÑÑ‚Ð¾Ñ‡Ð½Ð¸ÐºÐ¾Ð²" Foreground="White" FontWeight="SemiBold" Margin="0,0,0,8"/>
                                            <WrapPanel>
                                                <Button Content="ðŸ“‹ ÐŸÑƒÑ‚ÐµÐ²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒ" Style="{StaticResource GhostButton}" Command="{Binding GenerateNotebookGuideCommand}" Margin="0,0,8,8" Foreground="White" Padding="10,6" MinWidth="130"/>
                                                <Button Content="â“ FAQ" Style="{StaticResource GhostButton}" Command="{Binding GenerateFaqCommand}" Margin="0,0,8,8" Foreground="White" Padding="10,6" MinWidth="70"/>
                                                <Button Content="ðŸ“– Study Guide" Style="{StaticResource GhostButton}" Command="{Binding GenerateStudyGuideCommand}" Margin="0,0,8,8" Foreground="White" Padding="10,6" MinWidth="120"/>
                                                <Button Content="ðŸ“„ Summary" Style="{StaticResource GhostButton}" Command="{Binding GenerateSummaryCommand}" Margin="0,0,8,8" Foreground="White" Padding="10,6" MinWidth="95"/>
                                                <Button Content="ðŸ“‘ Outline" Style="{StaticResource GhostButton}" Command="{Binding GenerateOutlineCommand}" Margin="0,0,8,8" Foreground="White" Padding="10,6" MinWidth="85"/>
                                                <Button Content="ðŸŽ™ Podcast" Style="{StaticResource GhostButton}" Command="{Binding GeneratePodcastScriptCommand}" Margin="0,0,8,8" Foreground="White" Padding="10,6" MinWidth="95"/>
                                            </WrapPanel>
                                        </StackPanel>
                                    </Border>
                                    <Grid Grid.Row="1">
                                        <TextBlock Text="Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚Ðµ Ð¸ÑÑ‚Ð¾Ñ‡Ð½Ð¸ÐºÐ¸ Ð¸ Ð½Ð°Ð¶Ð¼Ð¸Ñ‚Ðµ ÐºÐ½Ð¾Ð¿ÐºÑƒ Ð²Ñ‹ÑˆÐµ" Foreground="#55FFFFFF" HorizontalAlignment="Center" VerticalAlignment="Center" Visibility="{Binding Artifacts.Count, Converter={StaticResource CountToVisibilityConverter}, ConverterParameter=Inverted}"/>
                                        <Grid Visibility="{Binding Artifacts.Count, Converter={StaticResource CountToVisibilityConverter}}">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="200"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            <ListBox ItemsSource="{Binding Artifacts}" SelectedItem="{Binding SelectedArtifact}" Background="#1A1A22" BorderThickness="0" Foreground="White" Padding="8">
                                                <ListBox.ItemTemplate>
                                                    <DataTemplate>
                                                        <TextBlock Text="{Binding Title}" TextWrapping="Wrap" Margin="0,4"/>
                                                    </DataTemplate>
                                                </ListBox.ItemTemplate>
                                            </ListBox>
                                            <Border Grid.Column="1" Background="#252530" CornerRadius="8" Margin="8,0,0,0" Padding="16">
                                                <Grid>
                                                    <TextBlock Text="Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð°Ñ€Ñ‚ÐµÑ„Ð°ÐºÑ‚ Ð¸Ð· ÑÐ¿Ð¸ÑÐºÐ° ÑÐ»ÐµÐ²Ð°" Foreground="#55FFFFFF" HorizontalAlignment="Center" VerticalAlignment="Center" Visibility="{Binding SelectedArtifact, Converter={StaticResource NullToVisibilityInverseConverter}}"/>
                                                    <ScrollViewer VerticalScrollBarVisibility="Auto" Visibility="{Binding SelectedArtifact, Converter={StaticResource NullToVisibilityConverter}}">
                                                        <StackPanel>
                                                            <Button Style="{StaticResource GhostButton}" Command="{Binding ExportArtifactToObsidianCommand}" 
                                                                    Content="ðŸ“¤ Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚ Ð² Obsidian" Foreground="White" HorizontalAlignment="Left" Margin="0,0,0,12" Padding="10,6" MinWidth="180"
                                                                    ToolTip="Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ ÑÑ‚Ð¾Ñ‚ Ð°Ñ€Ñ‚ÐµÑ„Ð°ÐºÑ‚ Ð² Ð¿Ð°Ð¿ÐºÑƒ AI_Notebook Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ð° Obsidian"/>
                                                            <TextBlock Text="{Binding SelectedArtifact.Title}" FontWeight="Bold" FontSize="16" Foreground="White" Margin="0,0,0,8"/>
                                                            <TextBlock Text="{Binding SelectedArtifact.Content}" Foreground="White" TextWrapping="Wrap"/>
                                                        </StackPanel>
                                                    </ScrollViewer>
                                                </Grid>
                                            </Border>
                                        </Grid>
                                    </Grid>
                                </Grid>
                            </Grid>
                        </Grid>
                    </Border>
                </Grid>

                <Border Grid.Row="2" Background="{StaticResource SecondaryPanelBrush}" Height="32" CornerRadius="0,0,16,16">
                    <Grid Margin="24,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="{Binding StatusMessage}" Foreground="#88FFFFFF" VerticalAlignment="Center" TextTrimming="CharacterEllipsis"/>
                        <TextBlock Grid.Column="1" Text="NEXUS AI v4.0-mvp" Foreground="#44FFFFFF" VerticalAlignment="Center" Margin="16,0,0,0"/>
                    </Grid>
                </Border>
            </Grid>
        </Grid>
    </Border>
</Window>
